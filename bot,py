import requests
import time
import telegram

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
BOT_TOKEN = 7277868783:AAHW7OGWYss2WSJsstUmD5A0MmZKzE7Y3Lg
CHANNEL_ID = -1002175859598  # –∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π ID
bot = telegram.Bot(token=BOT_TOKEN)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞
def get_prices():
    url = 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,toncoin&vs_currencies=usd'
    data = requests.get(url).json()
    btc = data['bitcoin']['usd']
    eth = data['ethereum']['usd']
    ton = data['toncoin']['usd']
    return f"üí∞ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã:\n\nBTC: ${btc}\nETH: ${eth}\nTON: ${ton}"

# –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
def main():
    message = bot.send_message(chat_id=CHANNEL_ID, text=get_prices())
    message_id = message.message_id

    while True:
        try:
            time.sleep(600)  # –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
            bot.edit_message_text(chat_id=CHANNEL_ID, message_id=message_id, text=get_prices())
        except Exception as e:
            print("–û—à–∏–±–∫–∞:", e)

if __name__ == '__main__':
    main()
